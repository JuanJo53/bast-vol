/* ---------------------------------------------------- */
/*  Generated by Enterprise Architect Version 13.5 		*/
/*  Created On : 19-jul.-2021 10:25:32 p. m. 				*/
/*  DBMS       : MySql 						*/
/* ---------------------------------------------------- */

SET FOREIGN_KEY_CHECKS=0 
;

/* Drop Tables */

DROP TABLE IF EXISTS `ARTICULO` CASCADE
;

DROP TABLE IF EXISTS `CATEGORIA` CASCADE
;

DROP TABLE IF EXISTS `CLIENTE` CASCADE
;

DROP TABLE IF EXISTS `DETALLEVENTA` CASCADE
;

DROP TABLE IF EXISTS `PROVEEDOR` CASCADE
;

DROP TABLE IF EXISTS `USUARIO` CASCADE
;

DROP TABLE IF EXISTS `VENTA` CASCADE
;

/* Create Tables */

CREATE TABLE `ARTICULO`
(
	`CODIGO` INT NOT NULL,
	`NOMBRE` VARCHAR(50) NULL,
	`CATEGORIA` INT NULL,
	`PROVEEDOR` INT NULL,
	`PRECIO` INT NULL,
	`STOCK` INT NULL,
	CONSTRAINT `PK_ARTICULO` PRIMARY KEY (`CODIGO` ASC)
)

;

CREATE TABLE `CATEGORIA`
(
	`CODIGO` INT NOT NULL,
	`NOMBRE` VARCHAR(50) NULL,
	CONSTRAINT `PK_CATEGORIA` PRIMARY KEY (`CODIGO` ASC)
)

;

CREATE TABLE `CLIENTE`
(
	`CODIGO` INT NOT NULL,
	`NOMBRE` VARCHAR(50) NULL,
	`NIT` INT NULL,
	`TELEFONO` INT NULL,
	`CORREO` VARCHAR(50) NULL,
	CONSTRAINT `PK_CLIENTE` PRIMARY KEY (`CODIGO` ASC)
)

;

CREATE TABLE `DETALLEVENTA`
(
	`CODIGO` INT NOT NULL,
	`ARTICULO` INT NULL,
	`CANTIDAD` INT NULL,
	`VENTA` INT NULL,
	`SUBTOTAL` VARCHAR(50) NULL,
	CONSTRAINT `PK_DETALLEVENTA` PRIMARY KEY (`CODIGO` ASC)
)

;

CREATE TABLE `PROVEEDOR`
(
	`CODIGO` INT NOT NULL,
	`NOMBRE` VARCHAR(50) NULL,
	`CORREO` VARCHAR(50) NULL,
	`TELEFONO` INT NULL,
	`CIUDAD` VARCHAR(50) NULL,
	`PAIS` VARCHAR(50) NULL,
	CONSTRAINT `PK_PROVEEDOR` PRIMARY KEY (`CODIGO` ASC)
)

;

CREATE TABLE `USUARIO`
(
	`CODIGO` INT NOT NULL,
	`NOMBRES` VARCHAR(50) NULL,
	`APELLIDOS` VARCHAR(50) NULL,
	`TELEFONO` INT NULL,
	`CORREO` VARCHAR(50) NULL,
	`USER` VARCHAR(50) NULL,
	`PASSWORD` VARCHAR(50) NULL,
	`TIPO` VARCHAR(50) NULL,
	CONSTRAINT `PK_USUARIO` PRIMARY KEY (`CODIGO` ASC)
)

;

CREATE TABLE `VENTA`
(
	`CODIGO` INT NOT NULL,
	`FECHA` DATE NULL,
	`USUARIO` INT NULL,
	`CLIENTE` INT NULL,
	`TOTAL` INT NULL,
	CONSTRAINT `PK_VENTA` PRIMARY KEY (`CODIGO` ASC)
)

;

/* Create Primary Keys, Indexes, Uniques, Checks */

ALTER TABLE `ARTICULO` 
 ADD INDEX `IXFK_ARTICULO_CATEGORIA` (`CATEGORIA` ASC)
;

ALTER TABLE `ARTICULO` 
 ADD INDEX `IXFK_ARTICULO_PROVEEDOR` (`PROVEEDOR` ASC)
;

ALTER TABLE `DETALLEVENTA` 
 ADD INDEX `IXFK_DETALLEVENTA_ARTICULO` (`ARTICULO` ASC)
;

ALTER TABLE `DETALLEVENTA` 
 ADD INDEX `IXFK_DETALLEVENTA_VENTA` (`VENTA` ASC)
;

ALTER TABLE `VENTA` 
 ADD INDEX `IXFK_VENTA_CLIENTE` (`CLIENTE` ASC)
;

ALTER TABLE `VENTA` 
 ADD INDEX `IXFK_VENTA_DETALLEVENTA` (`TOTAL` ASC)
;

ALTER TABLE `VENTA` 
 ADD INDEX `IXFK_VENTA_USUARIO` (`USUARIO` ASC)
;

/* Create Foreign Key Constraints */

ALTER TABLE `ARTICULO` 
 ADD CONSTRAINT `FK_ARTICULO_CATEGORIA`
	FOREIGN KEY (`CATEGORIA`) REFERENCES `CATEGORIA` (`CODIGO`) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE `ARTICULO` 
 ADD CONSTRAINT `FK_ARTICULO_PROVEEDOR`
	FOREIGN KEY (`PROVEEDOR`) REFERENCES `PROVEEDOR` (`CODIGO`) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE `DETALLEVENTA` 
 ADD CONSTRAINT `FK_DETALLEVENTA_ARTICULO`
	FOREIGN KEY (`ARTICULO`) REFERENCES `ARTICULO` (`CODIGO`) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE `DETALLEVENTA` 
 ADD CONSTRAINT `FK_DETALLEVENTA_VENTA`
	FOREIGN KEY (`VENTA`) REFERENCES `VENTA` (`CODIGO`) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE `VENTA` 
 ADD CONSTRAINT `FK_VENTA_CLIENTE`
	FOREIGN KEY (`CLIENTE`) REFERENCES `CLIENTE` (`CODIGO`) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE `VENTA` 
 ADD CONSTRAINT `FK_VENTA_USUARIO`
	FOREIGN KEY (`USUARIO`) REFERENCES `USUARIO` (`CODIGO`) ON DELETE Restrict ON UPDATE Restrict
;

SET FOREIGN_KEY_CHECKS=1 
;
